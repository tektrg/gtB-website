---
import { getCollection } from 'astro:content';
import Base from "@/layouts/Base.astro";
const now = new Date();
const posts = (await getCollection('blog', ({ data }) =>
  !data.draft && new Date(data.pubDate) <= now
)).sort((a, b) => +b.data.pubDate - +a.data.pubDate);
---
<Base title="Blog" description="Latest posts and updates from GPT Breeze.">
  <h1>Blog</h1>
  <ul>
    {posts.map((p) => (
      <li>
        <a href={`/blog/${p.slug ?? p.id}/`}>{p.data.title}</a>
      </li>
    ))}
  </ul>
</Base>
